# Linux

## Tmux

> 分屏+断开Terminal连接后继续运行进程。

```shell
sudo yum install tmux
```

结构：tmux包含多个session，一个session包含多个window，一个window包含多个pane，一个pane中打开了一个shell对话框

```shell
操作：
    (1) tmux：新建一个session，其中包含一个window，window中包含一个pane，pane里打开了一个shell对话框。
    (2) 按下Ctrl + b后手指松开，然后按%：将当前pane左右平分成两个pane。
    (3) 按下Ctrl + b后手指松开，然后按"（注意是双引号"）：将当前pane上下平分成两个pane。
    (4) Ctrl + d：关闭当前pane；如果当前window的所有pane均已关闭，则自动关闭window；如果当前session的所有window均已关闭，则自动关闭session。
    (5) 鼠标点击可以选pane。
    (6) 按下ctrl + b后手指松开，然后按方向键：选择相邻的pane。
    (7) 鼠标拖动pane之间的分割线，可以调整分割线的位置。
    (8) 按住ctrl + b的同时按方向键，可以调整pane之间分割线的位置。
    (9) 按下ctrl + b后手指松开，然后按z：将当前pane全屏/取消全屏。
    (10) 按下ctrl + b后手指松开，然后按d：挂起当前session。
    (11) tmux a：打开之前挂起的session。
    (12) 按下ctrl + b后手指松开，然后按s：选择其它session。
        方向键 —— 上：选择上一项 session/window/pane
        方向键 —— 下：选择下一项 session/window/pane
        方向键 —— 右：展开当前项 session/window
        方向键 —— 左：闭合当前项 session/window
    (13) 按下Ctrl + b后手指松开，然后按c：在当前session中创建一个新的window。
    (14) 按下Ctrl + b后手指松开，然后按w：选择其他window，操作方法与(12)完全相同。
    (15) 按下Ctrl + b后手指松开，然后按PageUp：翻阅当前pane内的内容。
    (16) 鼠标滚轮：翻阅当前pane内的内容。
    (17) 在tmux中选中文本时，需要按住shift键。（仅支持Windows和Linux，不支持Mac，不过该操作并不是必须的，因此影响不大）
    (18) tmux中复制/粘贴文本的通用方式：
        (1) 按下Ctrl + b后松开手指，然后按[
        (2) 用鼠标选中文本，被选中的文本会被自动复制到tmux的剪贴板
        (3) 按下Ctrl + b后松开手指，然后按]，会将剪贴板中的内容粘贴到光标处
    (19) 按下Ctrl + b后手指松开，然后按p：回到上一个window
    (20) 按下Ctrl + b后手指松开，然后按n：回到下一个window
    (21) tmux attach -t [SessionNumber]：进入指定number的session
```

## Vim

> 命令查询

### 一、Vim 的基本模式

Vim 有三种主要模式：

1. **正常模式**（Normal Mode）：用于浏览和执行命令。
2. **插入模式**（Insert Mode）：用于输入文本。
3. **命令模式**（Command Mode）：用于执行保存、退出等命令。

### 二、基本操作命令

1. 打开文件：

   ```shell
   vim filename
   ```

2. 保存并退出：

   - `:w`：保存文件。
   - `:wq` 或 `:x`：保存并退出。
   - `:q!`：不保存直接退出。

3. 切换到插入模式：

   - `i`：在当前光标前插入。
   - `I`：在行首插入。
   - `a`：在当前光标后插入。
   - `A`：在行尾插入。
   - `o`：在当前行下方插入新行。
   - `O`：在当前行上方插入新行。

### 三、光标移动命令

1. 移动光标：
   - `h`：左移一格。
   - `j`：下移一行。
   - `k`：上移一行。
   - `l`：右移一格。
2. 快速移动：
   - `gg`：移动到文件开头。
   - `G`：移动到文件末尾。
   - `0`：移动到行首。
   - `$`：移动到行尾。
   - `w`：移动到下一个单词的开头。
   - `e`：移动到当前单词的末尾。
   - `b`：移动到上一个单词的开头。
   - `Ctrl + f`：向下翻一页。
   - `Ctrl + b`：向上翻一页。

### 四、文本删除、复制和粘贴命令

1. 删除操作：
   - `x`：删除当前字符。
   - `dd`：删除当前行。
   - `D`：删除光标到行尾的内容。
   - `dw`：删除光标到下一个单词开头。
2. 复制和剪切：
   - `yy` 或 `Y`：复制当前行。
   - `yw`：复制一个单词。
   - `p`：粘贴在光标后。
   - `P`：粘贴在光标前。
3. 替换字符：
   - `r`：替换当前字符。
   - `R`：进入替换模式，覆盖后续字符。

### 五、查找和替换命令

1. 查找：
   - `/pattern`：查找 `pattern`。
   - `?pattern`：向上查找 `pattern`。
   - `n`：下一个匹配项。
   - `N`：上一个匹配项。
2. 替换：
   - `:s/old/new`：将当前行的第一个 `old` 替换为 `new`。
   - `:s/old/new/g`：将当前行所有 `old` 替换为 `new`。
   - `:%s/old/new/g`：将全文中所有 `old` 替换为 `new`。
   - `:%s/old/new/gc`：全文中替换所有 `old` 为 `new`，并在每次替换前询问确认。

### 六、撤销和重做

1. 撤销：
   - `u`：撤销上一步操作。
2. 重做：
   - `Ctrl + r`：重做上一步撤销的操作。

### 七、行号显示

1. 显示行号：
   - `:set nu` 或 `:set number`：显示行号。
2. 取消行号：
   - `:set nonu` 或 `:set nonumber`：取消行号。

### 八、窗口和缓冲区操作

1. 分割窗口：
   - `:sp filename`：水平分割窗口并打开文件。
   - `:vsp filename`：垂直分割窗口并打开文件。
   - `Ctrl + w + h/j/k/l`：在分割窗口之间移动。
2. 关闭窗口：
   - `:q`：关闭当前窗口。
3. 切换缓冲区：
   - `:bn`：切换到下一个缓冲区。
   - `:bp`：切换到上一个缓冲区。

### 九、文件操作

1. 保存文件：
   - `:w`：保存当前文件。
2. 另存为：
   - `:w filename`：将文件另存为 `filename`。
3. 强制保存：
   - `:w!`：强制保存文件。
4. 强制退出：
   - `:q!`：不保存退出文件。

### 十、标记和书签

1. 设置标记：
   - `m{a-z}`：设置标记 `{a-z}` 在当前位置。
2. 跳转到标记：
   - `'a`：跳转到标记 `a` 的行。
   - ``a`：跳转到标记 `a` 的精确位置。

### 十一、自动缩进和格式化

1. 自动缩进：
   - `==`：自动缩进当前行。
   - `gg=G`：自动缩进整个文件。
2. 格式化代码：
   - `gg=G`：格式化整个文件。

### 十二、退出 Vim

1. 保存并退出：
   - `:wq` 或 `ZZ`：保存并退出。
2. 退出不保存：
   - `:q!`：强制退出不保存。

### 十三、其他有用命令

1. 撤销高亮显示：
   - `:nohlsearch` 或 `:noh`：取消搜索后的高亮显示。
2. 拼写检查：
   - `:set spell`：启用拼写检查。
   - `]s`：跳转到下一个拼写错误。
   - `[s`：跳转到上一个拼写错误。
   - `z=`：显示拼写建议。

## 命令查询

### 一、文件与目录操作命令

1. *`ls`：列出目录内容

2. *`cd`：切换目录

3. *`pwd`：显示当前工作目录

4. *`mkdir`：创建新目录

5. *`touch`：创建空文件或更新文件时间

6. *`cp`：复制文件或目录（-r递归复制-p复制文件权限）

7. *`mv`：移动或重命名文件或目录

8. *`rm`：删除文件或目录（rm -rf：递归删除+强制删除）

9. `cat`：查看文件内容

10. `more`：分页查看文件内容

11. *`less`：分页查看文件内容，支持上下滚动

12. `head`：查看文件的前几行

13. `tail`：查看文件的最后几行

14. *`find`：查找文件或目录

    1. find . -iname "file.txt"：按名称查找，不区分大小写
    2. find . -type [dirname]：查找当前文件夹下的dirname文件夹

15. *`grep`：文本搜索（grep "pattern" file1 file2  file3）-i忽略大小写-r递归搜索

16. `chmod`：更改文件权限

    * r读w写x执行

    * rwx=4+2+1=7

    * rw-=4+2=6

    * r-w=4+1=5

    * r--= 4=4

      ```shell
      #例子
      chmod 755 filename
      7：文件所有者有rwx权限
      5：组内成员有r-x权限
      5：其他用户有r-x权限
      ```

17. `chown`：更改文件所有者

    **示例**: 将文件 `file.txt` 的所有者更改为 `john`，组更改为 `developers`。

    ```shell
    chown john:developers file.txt
    ```

18. `ln`：创建链接文件

    1. 硬链接：它和原始文件共享相同的元数据，相当于win中的强化版快捷方式，源文件被删依然可以通过硬链接访问文件内容
    2. 符号链接：类似win中快捷方式

19. `stat`：查看文件或文件系统状态

### 二、用户管理命令

1. `useradd`：添加用户
2. `usermod`：修改用户信息
3. `userdel`：删除用户
4. `passwd`：更改用户密码
5. `groupadd`：添加用户组
6. `groupdel`：删除用户组
7. `groups`：显示用户所属的组
8. `whoami`：显示当前用户
9. `id`：显示用户和组的ID信息
10. `su`：切换用户
11. `sudo`：以管理员权限执行命令

### 三、进程管理命令

1. *`ps`：查看当前进程

   ```shell
   a：显示所有用户的进程
   u：以用户为中心的格式显示进程信息
   x：显示没有控制终端的进程
   # 常用的找到进程方法
   ps aux | grep process_name
   ```

   **STAT (Process State)**：
   **进程状态**。表示进程当前的状态：

   - **R**: Running，正在运行或可运行。
   - **S**: Sleeping，睡眠状态，等待某个事件（如等待 I/O）。
   - **D**: Uninterruptible Sleep，不可中断的睡眠状态，通常是等待 I/O。
   - **T**: Stopped，进程已停止或暂停。
   - **Z**: Zombie，僵尸进程，进程已终止但尚未释放资源。
   - **I**: Idle，空闲状态。

   状态标志后面可能有其他符号：

   - **+**：前台进程组的领导者。
   - **l**：多线程进程。
   - **<**：进程的优先级较高。
2. *`top`：实时显示系统进程信息

   1. P：按CPU使用率排序
   2. M：按内存使用率排序
   3. T：按运行时间排序
   4. k：杀掉某个进程，输入进程的PID
   5. q：退出top
   6. R（运行）、S（睡眠中）、D（不可中断睡眠）、Z（僵尸进程）、T（停止）

3. `htop`：更友好的实时进程监控工具
4. *`kill`：杀死进程
5. `killall`：根据进程名杀死所有匹配的进程
6. `bg`：将进程移至后台运行
7. `fg`：将后台进程移至前台运行
8. `nice`：调整进程的优先级
9. `renice`：重新设置进程优先级
10. `jobs`：显示当前用户的所有作业
11. `nohup`：在后台运行命令并忽略挂起信号

### 四、系统信息命令

1. `uname`：显示系统信息
2. `hostname`：查看或设置系统主机名
3. `uptime`：显示系统运行时间及负载
4. `dmesg`：显示内核环缓冲区信息
5. `df`：查看文件系统磁盘空间使用情况
6. `du`：查看文件或目录磁盘使用情况
7. `free`：显示内存使用情况
8. `top`：查看实时系统资源使用情况
9. `vmstat`：显示系统性能统计
10. `iostat`：显示 CPU、设备 I/O 统计
11. `lscpu`：显示 CPU 信息
12. `lsblk`：列出块设备信息
13. `lsusb`：显示 USB 设备信息
14. `lspci`：显示 PCI 设备信息

### 五、网络管理命令

1. *`ping`：检测网络连接
2. `ifconfig`：查看或配置网络接口
3. `ip`：查看和管理网络设备、路由
4. `netstat`：显示网络连接、路由表等信息
5. `ss`：查看网络连接状态
6. `curl`：发送网络请求
7. `wget`：下载文件
8. `scp`：通过 SSH 复制文件
9. `ftp`：文件传输协议工具
10. `telnet`：远程连接
11. `ssh`：通过 SSH 远程登录
12. `nmap`：网络扫描和安全审计工具
13. `traceroute`：显示到主机的路由路径
14. `nslookup`：查询 DNS 记录
15. `dig`：DNS 查询工具

### 六、磁盘和文件系统管理命令

1. `mount`：挂载文件系统
2. `umount`：卸载文件系统
3. `fsck`：检查并修复文件系统错误
4. `mkfs`：格式化文件系统
5. `tune2fs`：调整 ext2/ext3/ext4 文件系统参数
6. `e2fsck`：检查和修复 ext 文件系统
7. `blkid`：查看块设备信息
8. `fdisk`：磁盘分区工具
9. `parted`：高级磁盘分区工具
10. `dd`：数据拷贝及转换工具

### 七、权限和安全命令

1. *`chmod`：更改文件权限
2. `chown`：更改文件所有权
3. `umask`：设置默认文件权限
4. *`sudo`：以管理员权限执行命令
5. `passwd`：修改用户密码
6. `ssh-keygen`：生成 SSH 密钥
7. `gpg`：数据加密工具
8. `iptables`：配置防火墙规则
9. `firewalld`：动态管理防火墙
10. `semanage`：管理 SELinux 策略
11. `selinux`：查看和管理 SELinux 状态

### 八、打包和压缩命令

1. `tar`：打包和解压缩 tar 文件
2. `gzip`：压缩文件
3. `gunzip`：解压缩文件
4. `zip`：压缩文件
5. `unzip`：解压缩 zip 文件
6. `bzip2`：压缩文件
7. `bunzip2`：解压缩文件
8. `xz`：压缩文件
9. `unxz`：解压缩文件
10. `rar`：压缩文件
11. `unrar`：解压缩 rar 文件

### 九、文本处理命令

1. `echo`：输出字符串或变量
2. `cat`：连接并显示文件内容
3. `grep`：搜索文本
4. `sed`：流编辑器，用于文本替换和过滤
5. `awk`：文本处理和报告生成工具
6. `cut`：剪切文本
7. `sort`：排序文本行
8. `uniq`：去除重复行
9. `tr`：替换文本中的字符
10. `wc`：统计文件中的字数、行数和字节数

### 十、系统管理命令

1. `reboot`：重启系统
2. `shutdown`：关机或重启系统
3. `systemctl`：管理 systemd 服务
4. `service`：启动、停止或重启服务
5. `cron`：计划任务管理
6. `at`：定时任务命令
7. `uptime`：查看系统运行时间
8. `htop`：实时显示系统状态
9. `journalctl`：查看系统日志
10. `dmesg`：显示系统启动信息

### 十一、开发相关命令

1. `gcc`：GNU 编译器
2. `gdb`：GNU 调试器
3. `make`：自动化构建工具
4. `cmake`：跨平台自动化构建系统
5. `git`：版本控制工具
6. `java`：运行 Java 程序
7. `python`：运行 Python 程序
8. `perl`：运行 Perl 程序
9. `npm`：Node.js 包管理工具
10. `pip`：Python 包管理工具

### 十二、常用实用工具

1. `date`：显示或设置系统日期和时间
2. `cal`：显示日历
3. `bc`：命令行计算器
4. `history`：显示命令历史
5. `alias`：为命令创建别名
6. `sleep`：延迟一段时间执行
7. `clear`：清屏
8. `time`：统计命令的执行时间
9. `watch`：周期性执行命令并显示输出

### 十三、帮助命令

1. `man`：查看命令手册
2. `info`：查看命令的详细文档
3. `help`：查看 shell 内建命令的帮助信息
4. `whatis`：显示命令的简短描述
5. `apropos`：搜索命令手册页